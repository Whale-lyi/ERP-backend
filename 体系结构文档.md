# ERP系统软件体系结构描述文档

| 人员   | 日期     | 内容                                       | 版本号 |
| ------ | -------- | ------------------------------------------ | ------ |
| 章亦诚 | 2022.7.6 | 初次建立体系结构文档，设计大纲             | v1.1   |
| 刘屿   | 2022.7.7 | 编写逻辑视图，开发包图，接口视角，信息视角 | v1.2   |
| 李学正 | 2022.7.8 | 完善已有部分并补充完成剩余内容             | v1.3   |
| 杨昭彤 | 2022.7.9 | 补充内容、检查修订                         | v1.4   |



[TOC]

## 1. 引言

### 1.1 编制目的

本报告详细完成对ERP系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通

### 1.2 词汇表

| 词汇名称  | 词汇含义     | 备注                                                   |
| --------- | ------------ | ------------------------------------------------------ |
| ERP       | 企业资源计划 |                                                        |
| warehouse | 库存         |                                                        |
| purchase  | 进、退货单   |                                                        |
| employee  | 员工         | 包括库存管理人员、进货销售人员、财务人员、人力资源人员 |
| promotion | 促销         |                                                        |
| account   | 账户         |                                                        |
| sheet     | 单据         | 包括收款单、付款单、工资单                             |
| viewsheet | 查看单据     | 包括销售明细表、财务明细表、经营情况表                 |

### 1.3 参考资料

软件工程与计算二

## 2. 产品概述

某民用企业专业从事灯具开关行业，现公司规模扩大、企业业务量、办公场所、员工数都发生增长，ERP系统是为了满足其新的业务发展要求而开发的，将数据集中存储并维护，用户可通过客户端完成日常工作。

## 3. 逻辑视角

<img src="https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-逻辑视角.png" style="zoom:67%;" />

<img src="https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-逻辑包图.png" style="zoom:80%;" />

## 4. 组合视角

### 4.1 开发包图

| 开发（物理）包       | 依赖的其他开发包                                             |
| -------------------- | ------------------------------------------------------------ |
| financial            | accountcontroller，viewsheetcontroller，collectioncontroller，paymentcontroller，salarycontroller，Vue组件库包，HTTP |
| gm                   | promotioncontroller，viewsheetcontroller，Vue组件库包，HTTP  |
| hr                   | salarycontroller，employeecontroller，Vue组件库包，HTTP      |
| inventory            | warehousecontroller，Vue组件库包，HTTP                       |
| accountcontroller    | accountservice，vo                                           |
| viewsheetcontroller  | viewsheetservice，vo                                         |
| collectioncontroller | sheetservice，vo                                             |
| paymentcontroller    | sheetservice，vo                                             |
| salarycontroller     | sheetservice，hrservice，vo                                  |
| promotioncontroller  | promotionservice，vo                                         |
| employeecontroller   | employeeservice，vo                                          |
| warehousecontroller  | warehouseservice，vo                                         |
| accountservice       | accountserviceimpl，vo                                       |
| viewsheetservice     | viewsheetserviceimpl，vo                                     |
| sheetservice         | sheetserviceimpl，vo                                         |
| hrservice            | hrserviceimpl，vo                                            |
| promotionservice     | promotionserviceimpl，vo                                     |
| employeeservice      | employeeserviceimpl，vo                                      |
| warehouseservice     | warehouseserviceimpl，vo                                     |
| accountserviceimpl   | accountdao，po，vo                                           |
| viewsheetserviceimpl | saledao，purchasedao，sheetdao，productdao，po，vo           |
| sheetserviceimpl     | sheetdao，accountdao，customerdao，po，vo，utils             |
| hrserviceimpl        | sheetdao，employeedao，po，vo，utils                         |
| promotionserviceimpl | promotiondao，productdao，po，vo                             |
| employeeserviceimpl  | employeedao，po，vo                                          |
| warehouseserviceimpl | warehousedao，po，vo，utils                                  |
| saledao              | mapper，po                                                   |
| purchasedao          | mapper，po                                                   |
| sheetdao             | mapper，po                                                   |
| productdao           | mapper，po                                                   |
| accountdao           | mapper，po                                                   |
| customerdao          | mapper，po                                                   |
| employeedao          | mapper，po                                                   |
| promotiondao         | mapper，po                                                   |
| warehousedao         | mapper，po                                                   |
| utils                |                                                              |
| po                   |                                                              |
| vo                   |                                                              |
| HTTP                 |                                                              |
| Vue组件库包          |                                                              |
| mapper               |                                                              |

![开发包图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-开发包图.png)

### 4.2 运行时进程

![](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-20220708153356997.png)

### 4.3 物理部署

![](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-物理部署.png)

## 5. 接口视角

### 5.1 模块的职责

<img src="https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-20220708153602433.png" style="zoom: 50%;" />

<img src="https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-服务端结构.png" style="zoom: 80%;" />

- 客户端各层职责

| 层             | 职责                                 |
| -------------- | ------------------------------------ |
| 启动模块       | 负责初始化网络通信机制，启动用户界面 |
| 用户界面层     | 展示客户端用户界面                   |
| 客户端网络模块 | 通过HTTP请求实现前后端通信           |

- 服务端各层职责

| 层             | 职责                                     |
| -------------- | ---------------------------------------- |
| 启动模块       | 负责初始化网络通信机制，启动用户界面     |
| 控制层         | 负责给前端提供数据交互和访问的接口       |
| 业务逻辑层     | 对于用户的操作进行响应并进行业务逻辑处理 |
| 数据层         | 负责数据的持久化及数据访问接口           |
| 服务端网络模块 | 通过HTTP请求实现前后端通信               |

- 层之间调用接口

| 接口                                                         | 服务调用方       | 服务提供方       |
| ------------------------------------------------------------ | ---------------- | ---------------- |
| AccountService<br />EmployeeService<br />HRService<br />PromotionService<br />SheetService<br />HistoryService<br />SaleDetailService<br />WarehouseService | 服务端控制层     | 服务端业务逻辑层 |
| AccountDao<br />CustomerDao<br />EmployeeDao<br />UserDao<br />ProductDao<br />PromotionDao<br />PurchaseReturnsSheetDao<br />PurchaseSheetDao<br />SaleReturnsSheetDao<br />SaleSheetDao<br />CollectionDao<br />PaymentDao<br />SalaryDao<br />WarehouseDao | 服务端业务逻辑层 | 服务端数据层     |

### 5.2 用户界面层分解

![页面结构](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-页面结构.png)

### 5.3 控制层分解

![image-20220708163109452](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-20220708163109452.png)

#### 5.3.1 职责

| 模块                 | 职责                                                  |
| -------------------- | ----------------------------------------------------- |
| accountcontroller    | 账户管理                                              |
| salarycontroller     | 制定⼯资单，薪酬规则制定                              |
| collectioncontroller | 制定收款单                                            |
| paymentcontroller    | 制定付款单                                            |
| viewsheetcontroller  | 查看销售明细表<br/>查看经营历程表<br />查看经营情况表 |
| promotioncontroller  | 制定促销策略                                          |
| employeecontroller   | 员⼯管理<br />员⼯打卡                                |
| warehousecontroller  | 库存赠送                                              |

#### 5.3.2 接口规范

##### accountcontroller模块的供接口

- AccountController

```java
/**
 * 创建账户
 * @param accountVO
 * @return
 */
@PostMapping("/create")
@Authorized(roles = {Role.ADMIN, Role.FINANCIAL_STAFF})
public Response createAccount(@RequestBody AccountVO accountVO)

/**
 * 删除
 * @param id
 * @return
 */
@GetMapping("/delete")
@Authorized(roles = {Role.ADMIN, Role.FINANCIAL_STAFF})
public Response deleteAccount(@RequestParam("id") Integer id)

/**
 * 更新
 * @param accountVO
 * @return
 */
@PostMapping("/update")
@Authorized(roles = {Role.ADMIN, Role.FINANCIAL_STAFF})
public Response updateAccount(@RequestBody AccountVO accountVO) 

/**
 * 通过关键词查找
 * @param keyword
 * @return
 */
@GetMapping("/searchList")
@Authorized(roles = {Role.ADMIN, Role.GM, Role.FINANCIAL_STAFF})
public Response searchAccountList(@RequestParam("keyword") String keyword) 

/**
 * 通过id查找
 * @param id
 * @return
 */
@GetMapping("/find")
@Authorized(roles = {Role.ADMIN, Role.FINANCIAL_STAFF})
public Response searchAccountById(@RequestParam("id") Integer id) 
```

##### accountcontroller模块的需接口

- AccountService

```java
/**
 * 创建账户
 */
AccountVO createAccount(AccountVO accountVO);

/**
 * 删除账户
 */
void deleteAccountById(Integer id);

/**
 * 修改账户
 */
void updateAccount(AccountVO accountVO);

/**
 * 查看账户（id）
 */
AccountVO searchAccountById(Integer id);

/**
 * 查询账户(关键字)
 */
List<AccountVO> findAccountByKeyword(String keyword);
```

##### salarycontroller模块的供接口

- SalaryController

```java
/**
 * 财务人员制定工资单
 */
@Authorized(roles = {Role.ADMIN, Role.FINANCIAL_STAFF, Role.GM})
@PostMapping(value = "/sheet-make")
public Response makeSalarySheet(@RequestBody SalarySheetVO salarySheetVO)

/**
 * 根据状态查看工资单
 */
@GetMapping("/sheet-show")
public Response showSheetByState(@RequestParam(value = "state", required = false) SalarySheetState state) 

/**
 * 总经理审批
 * @param id 工资单id;
 * @param state 修改后的状态("审批失败"/"审批完成")
 */
@Authorized(roles = {Role.ADMIN, Role.GM})
@GetMapping(value = "/approval")
public Response approval(@RequestParam("salarySheetId") String id,
                         @RequestParam("state") SalarySheetState state)

/**
 * 根据工资单id搜索工资单信息
 */
@GetMapping("/find-sheet")
public Response findBySheetId(@RequestParam(value = "id") String id) 

/**
 * 根据员工获取工资
 */
@PostMapping("/getSalaryAndTax")
public Response getSalaryAndTax(@RequestBody User user)

/**
 * 设置基本工资
 */
@GetMapping("/setSalary")
public Response setSalary(@RequestParam("role")Role role, @RequestParam("salary") BigDecimal salary) 

/**
 * 获取所有职位基本工资
 */
@GetMapping("/getSalary")
public Response getSalary() 
```

##### salarycontroller模块的需接口

- HRService

```java
/**
 *根据员工获取工资
 * @param user
 * @return
 */
SalaryAndTax getSalaryAndTax(User user);

/**
 *设置基本工资
 * @param role
 * @param salary
 */
void setSalary(Role role, BigDecimal salary);

/**
 * 获取所有职位基本工资
 * @return
 */
BasicSalaryVO getSalary();
```

- SheetService

```java
/**
 * 制定单据
 */
void makeSheet(UserVO userVO, SheetVO sheetVO);

/**
 * 根据状态获取单据
 */
List<SheetVO> getSheetByState(BaseEnum state);

/**
 * 审批单据
 */
void approval(String SheetId, BaseEnum state);

/**
 * 根据单据id搜索单据信息
 */
SheetVO getSheetById(String SheetId);
```

##### collectioncontroller模块的供接口

- CollectionController

```java
/**
 * 财务人员制定收款单
 */
@Authorized(roles = {Role.ADMIN, Role.FINANCIAL_STAFF, Role.GM})
@PostMapping(value = "/sheet-make")
public Response makeCollectionSheet(UserVO userVO, @RequestBody CollectionSheetVO collectionSheetVO)

/**
 * 根据状态查看收款单
 */
@GetMapping("/sheet-show")
public Response showSheetByState(@RequestParam(value = "state", required = false)CollectionSheetState state) 

/**
 * 总经理审批
 * @param id 收款单id;
 * @param state 修改后的状态("审批失败"/"审批完成")
 */
@Authorized(roles = {Role.ADMIN, Role.GM})
@GetMapping(value = "/approval")
public Response approval(@RequestParam("collectionSheetId") String id,
                         @RequestParam("state") CollectionSheetState state)

/**
 * 根据收款单id搜索收款单信息
 */
@GetMapping("/find-sheet")
public Response findBySheetId(@RequestParam(value = "id") String id) 
```

##### collectioncontroller模块的需接口

- SheetService

```java
/**
 * 制定单据
 */
void makeSheet(UserVO userVO, SheetVO sheetVO);

/**
 * 根据状态获取单据
 */
List<SheetVO> getSheetByState(BaseEnum state);

/**
 * 审批单据
 */
void approval(String SheetId, BaseEnum state);

/**
 * 根据单据id搜索单据信息
 */
SheetVO getSheetById(String SheetId);
```

##### paymentcontroller模块的供接口

- PaymentController

```java
/**
 * 财务人员制定付款单
 */
@Authorized(roles = {Role.ADMIN, Role.FINANCIAL_STAFF, Role.GM})
@PostMapping(value = "/sheet-make")
public Response makePaymentSheet(UserVO userVO, @RequestBody PaymentSheetVO paymentSheetVO)

/**
 * 根据状态查看付款单
 */
@GetMapping("/sheet-show")
public Response showSheetByState(@RequestParam(value = "state", required = false) PaymentSheetState state)

/**
 * 总经理审批
 * @param id 付款单id;
 * @param state 修改后的状态("审批失败"/"审批完成")
 */
@Authorized(roles = {Role.ADMIN, Role.GM})
@GetMapping(value = "/approval")
public Response approval(@RequestParam("paymentSheetId") String id,
                         @RequestParam("state") PaymentSheetState state)

/**
 * 根据付款单id搜索付款单信息
 */
@GetMapping("/find-sheet")
public Response findBySheetId(@RequestParam(value = "id") String id) 
```

##### paymentcontroller模块的需接口

- SheetService

```java
/**
 * 制定单据
 */
void makeSheet(UserVO userVO, SheetVO sheetVO);

/**
 * 根据状态获取单据
 */
List<SheetVO> getSheetByState(BaseEnum state);

/**
 * 审批单据
 */
void approval(String SheetId, BaseEnum state);

/**
 * 根据单据id搜索单据信息
 */
SheetVO getSheetById(String SheetId);
```

##### viewsheetcontroller模块的供接口

- BusinessHistoryController

```java
/**
 * 通过条件筛选表单
 * @param condition
 * @return
 */
@PostMapping(value = "/find-sheet")
public Response findSheetByCondition(@RequestBody Condition condition) 
```

- SaleDetailController

```java
/**
 * 查看销售明细表
 * @param conditionVO
 * @return
 */
@PostMapping(value = "/search")
public Response searchSaleDetail(@RequestBody ConditionVO conditionVO)
```

##### viewsheetcontroller模块的需接口

- BusinessHistoryService

```java
/**
 * 通过条件筛选表单
 * @param condition
 * @return
 */
Object findSheetByCondition(Condition condition);
```

- SaleDetailService

```java
/**
 * 查看销售明细表
 * @param conditionVO
 * @return
 */
List<SaleDetailTableVO> searchSaleDetail(ConditionVO conditionVO);
```

##### promotioncontroller模块的供接口

- PromotionController

```java
/**
 * 针对不同级别的用户制定促销策略（折扣，代金券，赠品）
 * @param promotionVO 促销策略（折扣，代金券，赠品）
 * @return
 */
@PostMapping("/set-promotion")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response setPromotion(@RequestBody PromotionVO promotionVO)

/**
 * 根据等级获取客户的促销策略
 * @param level 客户等级
 * @return
 */
@GetMapping("/get-promotion")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response getPromotion(@RequestParam("level") Integer level)

/**
 * 获取全部等级的促销策略
 * @return
 */
@GetMapping("/getAllPromotion")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response getPromotion() 

/**
 * 总经理设定特价包
 * @param pricePackVO 特价包
 * @return
 */
@PostMapping("/set-price-pack")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response setPricePack(@RequestBody PricePackVO pricePackVO)

/**
 * 获取全部特价包
 * @return List<PricePackVO>
 */
@GetMapping("/get-price-pack")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response getPricePack() 

/**
 * 通过id获取特价包
 * @return PricePackVO
 */
@GetMapping("/getPricePackById")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response getPricePackById(@RequestParam("id") Integer id) 

/**
 * 修改特价包
 * @return
 */
@PostMapping("/update-price-pack")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response updatePricePack(@RequestBody PricePackVO pricePackVO) 

/**
 * 删除特价包
 */
@GetMapping("/delete-price-pack")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response deletePricePackById(@RequestParam("id") Integer id) 

/**
 * 总经理设定总价促销策略
 * @param amountPromotionVO 总价促销策略
 * @return
 */
@PostMapping("/set-amount-promotion")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response setAmountPromotion(@RequestBody AmountPromotionVO amountPromotionVO) 

/**
 * 获取全部总价促销策略
 * @return List<AmountPromotionVO>
 */
@GetMapping("/get-amount-promotion")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response getAmountPromotion() 

/**
 * 修改总价促销策略
 * @return
 */
@PostMapping("/update-amount-promotion")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response updateAmountPromotion(@RequestBody AmountPromotionVO amountPromotionVO)

/**
 * 删除总价促销策略
 */
@GetMapping("/delete-amount-promotion")
@Authorized(roles = {Role.ADMIN, Role.GM})
public Response deleteAmountPromotion(@RequestParam("id") Integer id) 
```

##### promotioncontroller模块的需接口

- PromotionService

```java
/**
 *针对不同级别的用户制定促销策略
 * @param promotionVO
 */
void setPromotion(PromotionVO promotionVO);

/**
 *根据等级获取客户的促销策略
 * @param level
 * @return
 */
PromotionVO getPromotion(Integer level);

/**
 *获取全部等级的促销策略
 * @return
 */
List<PromotionVO> getAllPromotion();

/**
 *总经理设定特价包
 * @param pricePackVO
 */
void setPricePack(PricePackVO pricePackVO);

/**
 *获取全部特价包
 * @return
 */
List<PricePackVO> getPricePack();

/**
 *通过id获取特价包
 * @param id
 * @return
 */
PricePackVO getPricePackById(Integer id);

/**
 *修改特价包
 * @param pricePackVO
 */
void updatePricePack(PricePackVO pricePackVO);

/**
 *删除特价包
 * @param id
 */
void deletePricePack(Integer id);

/**
 *总经理设定总价促销策略
 * @param amountPromotionVO
 */
void setAmountPromotion(AmountPromotionVO amountPromotionVO);

/**
 *获取全部总价促销策略
 * @return
 */
List<AmountPromotionVO> getAmountPromotion();

/**
 *获取最优总价促销策略
 * @param price
 * @return
 */
AmountPromotionVO getAmountPromotionByPrice(BigDecimal price);

/**
 *修改总价促销策略
 * @param amountPromotionVO
 */
void updateAmountPromotion(AmountPromotionVO amountPromotionVO);

/**
 *删除总价促销策略
 * @param id
 */
void deleteAmountPromotion(Integer id);
```

##### employeecontroller模块的供接口

- EmployeeController

```java
/**
 * 注册新员工
 * @param employeeVO
 * @return
 */
@PostMapping("/register")
public Response register(@RequestBody EmployeeVO employeeVO)

/**
 * 查找所有员工
 * @return
 */
@GetMapping("/findAll")
public Response findAll() 

/**
 * 员工打卡
 * @param name  当前登录用户的姓名
 * @return
 */
@GetMapping("/clock-in")
public Response clockIn(@RequestParam("name") String name)

/**
 * 返回全部员工打卡记录(姓名+总数)
 * @return 全部员工的打卡记录List<ClockInCountVO>,参考vo.clockin.ClockInCountVO
 */
@GetMapping("/findAllRecord")
public Response findAllRecord() 

/**
 * 返回当前登录用户的打卡信息（姓名+每次打卡时间）
 * @param name 当前登录用户的姓名
 * @return
 */
@GetMapping("/findRecordByName")
public Response findRecordByName(@RequestParam("name") String name)

/**
 * 返回当前登录用户是否成功打卡
 * @param name
 * @return
 */
@GetMapping("/checkRecordByName")
public Response checkRecordByName(@RequestParam("name") String name) 
```

##### employeecontroller模块的需接口

- EmployeeService

```java
/**
 *注册新员工
 * @param employeeVO
 */
void register(EmployeeVO employeeVO);

/**
 * 通过姓名查找员工
 * @param name
 * @return
 */
EmployeeVO findEmployeeByName(String name);

/**
 *查找所有员工
 * @return
 */
List<EmployeeVO> findAll();

/**
 *员工打卡
 * @param name
 */
void clockIn(String name);

/**
 *返回全部员工打卡记录
 * @return
 */
List<ClockInCountVO> findAllRecord();

/**
 *返回当前登录用户的打卡信息
 * @param name
 * @return
 */
List<ClockInVO> findRecordByName(String name);

/**
 *返回当前登录用户是否成功打卡
 * @param name
 * @return
 */
CheckClockVO checkRecordByName(String name);
```

##### warehousecontroller模块的供接口

- WarehouseController

```java
/**
 * 总经理审批库存赠送单
 * @param id 库存赠送单id;
 * @param state 修改后的状态("审批失败"/"审批完成")
 */
@Authorized(roles = {Role.ADMIN, Role.GM})
@GetMapping(value = "/giftSheet/approval")
public Response approval(@RequestParam("warehouseGiftSheetId") String id,
                         @RequestParam("state") WarehouseGiftSheetState state) 

/**
 * 根据状态查看库存赠送单
 * @param state 库存赠送单状态
 * @return List<WarehouseGiftSheetVO>
 */
@GetMapping("/giftSheet/show")
public Response showSheetByState(@RequestParam(value = "state", required = false) WarehouseGiftSheetState state) 
```

##### warehousecontroller模块的需接口

- WarehouseService

```java
/**
 * 审批库存赠送单(总经理)
 * @param warehouseGiftSheetId 库存赠送单id
 * @param state 库存赠送单修改后的状态(state == "审批失败"/"审批完成")
 */
void approvalGiftSheet(String warehouseGiftSheetId, WarehouseGiftSheetState state);

/**
 * 制定库存赠送单
 * @param warehouseGiftSheetVO
 */
void makeGiftSheet(WarehouseGiftSheetVO warehouseGiftSheetVO);
/**
 * 通过状态获取库存赠送单
 */
List<WarehouseGiftSheetVO> getGiftSheetByState(WarehouseGiftSheetState state);
```

### 5.4 业务逻辑层分解

![image-20220708171128000](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-20220708171128000.png)

#### 5.4.1 职责

| 模块                 | 职责                                                  |
| -------------------- | ----------------------------------------------------- |
| accountserviceimpl   | 账户管理                                              |
| hrserviceimpl        | 薪酬规则制定                                          |
| sheetserviceimpl     | 制定⼯资单、制定收款单、制定付款单                    |
| utils                | 生成id，计算税款                                      |
| viewsheetserviceimpl | 查看销售明细表<br/>查看经营历程表<br />查看经营情况表 |
| promotionserviceimpl | 制定促销策略                                          |
| employeeserviceimpl  | 员⼯管理<br />员⼯打卡                                |
| warehouseserviceimpl | 库存赠送                                              |

#### 5.4.2 接口规范

##### accountserviceimpl模块的供接口

- AccountServiceImpl

```java
/**
 * 创建账户
 */
AccountVO createAccount(AccountVO accountVO);

/**
 * 删除账户
 */
void deleteAccountById(Integer id);

/**
 * 修改账户
 */
void updateAccount(AccountVO accountVO);

/**
 * 查看账户（id）
 */
AccountVO searchAccountById(Integer id);

/**
 * 查询账户(关键字)
 */
List<AccountVO> findAccountByKeyword(String keyword);
```

##### accountserviceimpl模块的需接口

- AccountDao

```java
/**
 * 创建账户
 */
Integer createAccount(AccountPO accountPO);

/**
 * 删除账户
 */
void deleteAccountById(@Param("id") Integer id);

/**
 * 修改账户
 */
void updateAccount(AccountPO accountPO);

/**
 * 查看账户（id）
 */
AccountPO searchAccountById(@Param("id") Integer id);

/**
 * 查询账户(关键字)
 */
List<AccountPO> findAccountByKeyword(@Param("keyword") String keyword);
```

##### hrserviceimpl模块的供接口

- HRServiceImpl

```java
/**
 *根据员工获取工资
 * @param user
 * @return
 */
SalaryAndTax getSalaryAndTax(User user);

/**
 *设置基本工资
 * @param role
 * @param salary
 */
void setSalary(Role role, BigDecimal salary);

/**
 * 获取所有职位基本工资
 * @return
 */
BasicSalaryVO getSalary();
```

##### hrserviceimpl模块的需接口

- SalaryDao

```java
void updateSalary(BasicSalaryPO basicSalaryPO);

BasicSalaryPO getSalary();
```

- SalaryStrategy

```java
/**
 * 获取工资和税
 * @param user
 * @return
 */
SalaryAndTax getSalaryAndTax(User user);
```

##### sheetserviceimpl模块的供接口

- SheetService

```java
/**
 * 制定单据
 */
void makeSheet(UserVO userVO, SheetVO sheetVO);

/**
 * 根据状态获取单据
 */
List<SheetVO> getSheetByState(BaseEnum state);

/**
 * 审批单据
 */
void approval(String SheetId, BaseEnum state);

/**
 * 根据单据id搜索单据信息
 */
SheetVO getSheetById(String SheetId);
```

##### sheetserviceimpl模块的需接口

- CollectionDao

```java
/**
 * 获取最近一条收款单
 * @return
 */
CollectionSheetPO getLatestSheet();

/**
 * 存入一条收款单记录
 * @param toSave 一条收款单记录
 * @return 影响的行数
 */
Integer saveSheet(CollectionSheetPO toSave);

/**
 * 把收款单上的具体内容存入数据库
 * @param collectionSheetContent 收款单上的转账列表
 */
Integer saveBatchSheetContent(List<CollectionSheetContentPO> collectionSheetContent);

/**
 * 查找所有收款单
 */
List<CollectionSheetPO> findAllSheet();

/**
 * 根据state返回收款单
 * @param state 收款单状态
 * @return 收款单列表
 */
List<CollectionSheetPO> findAllByState(@Param("state")CollectionSheetState state);

/**
 * 根据条件(时间、客户、业务员)查找
 */
List<CollectionSheetPO> findSheetByCondition(Condition condition);

/**
 * 查找指定id的收款单
 * @param id
 * @return
 */
CollectionSheetPO findSheetById(String id);

/**
 * 查找指定收款单下转账列表
 * @param sheetId
 */
List<CollectionSheetContentPO> findContentBySheetId(String sheetId);

/**
 * 更新指定收款单的状态
 * @param sheetId
 * @param state
 * @return
 */
Integer updateSheetState(String sheetId, CollectionSheetState state);
```

- PaymentDao

```java
/**
 * 获取最近一条付款单
 * @return
 */
PaymentSheetPO getLatestSheet();

/**
 * 存入一条付款单记录
 * @param toSave 一条付款单记录
 * @return 影响的行数
 */
Integer saveSheet(PaymentSheetPO toSave);

/**
 * 把付款单上的具体内容存入数据库
 * @param paymentSheetContent 付款单上的转账列表
 */
Integer saveBatchSheetContent(List<PaymentSheetContentPO> paymentSheetContent);

/**
 * 查找所有付款单
 */
List<PaymentSheetPO> findAllSheet();

/**
 * 根据state返回付款单
 * @param state 付款单状态
 * @return 付款单列表
 */
List<PaymentSheetPO> findAllByState(@Param("state") PaymentSheetState state);

/**
 * 根据条件(时间、客户、业务员)查找
 */
List<PaymentSheetPO> findSheetByCondition(Condition condition);

/**
 * 查找指定id的付款单
 * @param id
 * @return
 */
PaymentSheetPO findSheetById(String id);

/**
 * 查找指定付款单下转账列表
 * @param sheetId
 */
List<PaymentSheetContentPO> findContentBySheetId(String sheetId);

/**
 * 更新指定付款单的状态
 * @param sheetId
 * @param state
 * @return
 */
Integer updateSheetState(String sheetId, PaymentSheetState state);
```

- SalaryDao

```java
SalarySheetPO getLatestSheet();

Integer saveSheet(SalarySheetPO toSave);

List<SalarySheetPO> findAllSheet();

List<SalarySheetPO> findAllSheetByState(SalarySheetState state);

List<SalarySheetPO> findSheetByCondition(Condition condition);

SalarySheetPO findSheetById(String id);

Integer updateSheetState(String sheetId, SalarySheetState state);

void updateSalary(BasicSalaryPO basicSalaryPO);

BasicSalaryPO getSalary();
```

- AccountDao

```java
/**
 * 修改账户
 */
void updateAccount(AccountPO accountPO);

/**
 * 查看账户（id）
 */
AccountPO searchAccountById(@Param("id") Integer id);
```

- CustomerDao

```java
int updateOne(CustomerPO customerPO);

CustomerPO findOneById(Integer supplier);
```

##### viewsheetserviceimpl模块的供接口

- BusinessHistoryController

```java
/**
 * 通过条件筛选表单
 * @param condition
 * @return
 */
Object findSheetByCondition(Condition condition);

List<SaleSheetVO> getSaleSheet(Condition condition);

List<SaleReturnsSheetVO> getSaleReturnsSheet(Condition condition);

List<PurchaseSheetVO> getPurchaseSheet(Condition condition);

List<PurchaseReturnsSheetVO> getPurchaseReturnsSheet(Condition condition);

List<CollectionSheetVO> getCollectionSheet(Condition condition);

List<PaymentSheetVO> getPaymentSheet(Condition condition);

List<SalarySheetVO> getSalarySheet(Condition condition);
```

- SaleDetailController

```java
/**
 * 查看销售明细表
 * @param conditionVO
 * @return
 */
List<SaleDetailTableVO> searchSaleDetail(ConditionVO conditionVO);
```

##### viewsheetserviceimpl模块的需接口

- SaleSheetDao

```java
/**
 * 查找指定id的销售单
 * @param id
 * @return
 */
SaleSheetPO findSheetById(String id);
/**
 * 根据条件(时间、客户、业务员)查找
 */
List<SaleSheetPO> findSheetByCondition(Condition condition);

/**
 * 根据条件(时间、客户、业务员)查找
 */
List<SaleSheetPO> findSheetByConditionPO(ConditionPO conditionPO);

/**
 * 查找指定销售单下具体的商品内容
 * @param sheetId
 */
List<SaleSheetContentPO> findContentBySheetId(String sheetId);
```

- SaleReturnsSheetDao

```java
List<SaleReturnsSheetPO> findSheetByCondition(Condition condition);

/**
 * 根据条件(时间、业务员)查找
 * @param conditionPO
 * @return
 */
List<SaleReturnsSheetPO> findSheetByConditionPO(ConditionPO conditionPO);

/**
 * 通过saleReturnsSheetId找到对应的content条目
 * @param saleReturnsSheetId
 * @return
 */
List<SaleReturnsSheetContentPO> findContentBySaleReturnsSheetId(@Param("saleReturnsSheetId") String saleReturnsSheetId);
```

- PurchaseSheetDao

```java
/**
 * 根据条件(时间、客户、业务员)查找
 */
List<PurchaseSheetPO> findSheetByCondition(Condition condition);

List<PurchaseSheetContentPO> findContentByPurchaseSheetId(String purchaseSheetId);
```

- PurchaseReturnsSheetDao

```java
/**
 * 根据条件(时间、客户、业务员)查找
 */
List<PurchaseReturnsSheetPO> findSheetByCondition(Condition condition);

/**
 * 通过purchaseReturnsSheetId找到对应条目
 * @param purchaseReturnsSheetId 进货退货单id
 * @return
 */
PurchaseReturnsSheetPO findOneById(String purchaseReturnsSheetId);
```

- CollectionDao

```java
/**
 * 根据条件(时间、客户、业务员)查找
 */
List<CollectionSheetPO> findSheetByCondition(Condition condition);

/**
 * 查找指定收款单下转账列表
 * @param sheetId
 */
List<CollectionSheetContentPO> findContentBySheetId(String sheetId);
```

- PaymentDao

```java
/**
 * 根据条件(时间、客户、业务员)查找
 */
List<PaymentSheetPO> findSheetByCondition(Condition condition);

/**
 * 查找指定付款单下转账列表
 * @param sheetId
 */
List<PaymentSheetContentPO> findContentBySheetId(String sheetId);
```

- SalaryDao

```java
List<SalarySheetPO> findSheetByCondition(Condition condition);
```

- ProductDao

```java
ProductPO findById(String id);
```

##### promotionserviceimpl模块的供接口

- PromotionService

```java
/**
 *针对不同级别的用户制定促销策略
 * @param promotionVO
 */
void setPromotion(PromotionVO promotionVO);

/**
 *根据等级获取客户的促销策略
 * @param level
 * @return
 */
PromotionVO getPromotion(Integer level);

/**
 *获取全部等级的促销策略
 * @return
 */
List<PromotionVO> getAllPromotion();

/**
 *总经理设定特价包
 * @param pricePackVO
 */
void setPricePack(PricePackVO pricePackVO);

/**
 *获取全部特价包
 * @return
 */
List<PricePackVO> getPricePack();

/**
 *通过id获取特价包
 * @param id
 * @return
 */
PricePackVO getPricePackById(Integer id);

/**
 *修改特价包
 * @param pricePackVO
 */
void updatePricePack(PricePackVO pricePackVO);

/**
 *删除特价包
 * @param id
 */
void deletePricePack(Integer id);

/**
 *总经理设定总价促销策略
 * @param amountPromotionVO
 */
void setAmountPromotion(AmountPromotionVO amountPromotionVO);

/**
 *获取全部总价促销策略
 * @return
 */
List<AmountPromotionVO> getAmountPromotion();

/**
 *获取最优总价促销策略
 * @param price
 * @return
 */
AmountPromotionVO getAmountPromotionByPrice(BigDecimal price);

/**
 *修改总价促销策略
 * @param amountPromotionVO
 */
void updateAmountPromotion(AmountPromotionVO amountPromotionVO);

/**
 *删除总价促销策略
 * @param id
 */
void deleteAmountPromotion(Integer id);
```

##### promotionserviceimpl模块的需接口

- PromotionDao

```java
/**
 * 根据客户等级获取促销力度
 */
PromotionPO getPromotionByLevel(Integer level);

/**
 * 更改某一等级促销策略
 */
Integer updatePromotion(PromotionPO promotionPO);

/**
 * 根据等级获取赠品
 */
List<GiftPO> getGiftByLevel(Integer level);

/**
 * 插入赠品
 */
Integer insertGift(List<GiftPO> giftPOList);

/**
 * 清空某一等级的赠品
 */
Integer deleteGiftsByLevel(Integer level);

/**
 * 保存特价包
 */
Integer savePricePack(PricePackPO pricePackPO);

/**
 * 保存特价包具体信息
 */
Integer saveBatchPricePackContent(List<PricePackContentPO> pricePackContent);

/**
 * 获取全部特价包
 */
List<PricePackPO> getAllPricePack();

/**
 * 根据id获取特价包
 */
PricePackPO getPricePackById(Integer id);

/**
 * 通过特价包id获取具体内容
 */
List<PricePackContentPO> getContentByPricePackId(Integer id);

/**
 * 更改某一特价包
 */
Integer updatePricePack(PricePackPO pricePackPO);

/**
 * 删除某一特价包
 */
Integer deletePricePackById(Integer id);

/**
 * 删除某一特价包具体内容
 */
Integer deleteContentByPricePackId(Integer id);

/**
 * 保存总价促销策略
 */
Integer saveAmountPromotion(AmountPromotionPO amountPromotionPO);

/**
 * 保存总价促销策略具体赠品
 */
Integer saveBatchAmountPromotionContent(List<AmountPromotionContentPO> amountPromotionContent);

/**
 * 获取全部总价促销策略
 */
List<AmountPromotionPO> getAllAmountPromotion();

/**
 * 根据总价获取最接近的总价促销策略
 */
AmountPromotionPO getAmountPromotionByPrice(BigDecimal price);

/**
 * 通过总价促销策略id获取具体赠品
 */
List<AmountPromotionContentPO> getContentByAmountPromotionId(Integer id);

/**
 * 更改某一总价促销策略
 */
Integer updateAmountPromotion(AmountPromotionPO pricePackPO);

/**
 * 删除某一总价促销策略
 */
Integer deleteAmountPromotionById(Integer id);

/**
 * 删除某一总价促销策略具体赠品
 */
Integer deleteContentByAmountPromotionId(Integer id);
```

- ProductDao

```java
ProductPO findById(String id);
```

- PromotionStrategy

```java
//通过客户等级获取促销
PromotionVO getPromotion();
```

##### employeeserviceimpl模块的供接口

- EmployeeService

```java
/**
 *注册新员工
 * @param employeeVO
 */
void register(EmployeeVO employeeVO);

/**
 * 通过姓名查找员工
 * @param name
 * @return
 */
EmployeeVO findEmployeeByName(String name);

/**
 *查找所有员工
 * @return
 */
List<EmployeeVO> findAll();

/**
 *员工打卡
 * @param name
 */
void clockIn(String name);

/**
 *返回全部员工打卡记录
 * @return
 */
List<ClockInCountVO> findAllRecord();

/**
 *返回当前登录用户的打卡信息
 * @param name
 * @return
 */
List<ClockInVO> findRecordByName(String name);

/**
 *返回当前登录用户是否成功打卡
 * @param name
 * @return
 */
CheckClockVO checkRecordByName(String name);
```

##### employeeserviceimpl模块的需接口

- EmployeeDao

```java
/**
 * 新增员工
 * @param employeePO
 * @return
 */
Integer insertEmployee(EmployeePO employeePO);

/**
 * 通过姓名查找
 * @param name
 * @return
 */
EmployeePO findEmployeeByName(String name);

/**
 * 查找全部
 * @return
 */
List<EmployeePO> findAll();

/**
 * 插入打卡记录
 * @param clockInPO
 * @return
 */
Integer insertCheckIn(ClockInPO clockInPO);

/**
 * 通过姓名查找打卡记录
 * @param name
 * @return
 */
List<ClockInPO> findClockInByName(String name);

/**
 * 查找全部打卡信息
 * @return
 */
List<ClockInCountPO> findAllCountRecord();

/**
 * 获取某人最新打卡记录
 * @param name
 * @return
 */
ClockInPO getLatestByName(String name);
```

- UserService

```java
/**
 * 用户注册
 * @param userVO
 */
void register(UserVO userVO);

/**
 * 获取用户
 * @return
 */
User getUserByName(String name);
```

##### warehouseserviceimpl模块的供接口

- WarehouseService

```java
/**
 * 审批库存赠送单(总经理)
 * @param warehouseGiftSheetId 库存赠送单id
 * @param state 库存赠送单修改后的状态(state == "审批失败"/"审批完成")
 */
void approvalGiftSheet(String warehouseGiftSheetId, WarehouseGiftSheetState state);

/**
 * 制定库存赠送单
 * @param warehouseGiftSheetVO
 */
void makeGiftSheet(WarehouseGiftSheetVO warehouseGiftSheetVO);
/**
 * 通过状态获取库存赠送单
 */
List<WarehouseGiftSheetVO> getGiftSheetByState(WarehouseGiftSheetState state);
```

##### warehouseserviceimpl模块的需接口

- WarehouseGiftSheetDao

```java
/**
 * 获取最近一条库存赠送单
 * @return 最近一条库存赠送单
 */
WarehouseGiftSheetPO getLatestSheet();

/**
 * 存入一条库存赠送单
 * @param toSave 一条库存赠送单
 * @return 影响行数
 */
Integer saveSheet(WarehouseGiftSheetPO toSave);

/**
 * 将库存赠送单上的内容存入数据库
 * @param warehouseGiftSheetContent 赠送单上的具体内容
 * @return 影响行数
 */
Integer saveBatchSheetContent(List<WarehouseGiftSheetContentPO> warehouseGiftSheetContent);

/**
 * 查找所有库存赠送单
 * @return 所有库存赠送单
 */
List<WarehouseGiftSheetPO> findAllSheet();

/**
 * 根据state返回库存赠送单
 * @param state 单据状态
 * @return state状态的库存赠送单
 */
List<WarehouseGiftSheetPO> findAllByState(WarehouseGiftSheetState state);

/**
 * 查找指定id的库存赠送单
 * @param id 库存赠送单id
 * @return 指定id的库存赠送单
 */
WarehouseGiftSheetPO findSheetById(String id);

/**
 * 查找指定库存赠送单下具体的商品内容
 * @param sheetId 库存赠送单id
 * @return 指定库存赠送单下具体的商品内容
 */
List<WarehouseGiftSheetContentPO> findContentBySheetId(String sheetId);

/**
 * 更新指定库存赠送单的状态
 * @param sheetId 库存赠送单id
 * @param state 库存赠送单的状态
 * @return 影响行数
 */
Integer updateSheetState(String sheetId, WarehouseGiftSheetState state);
```

- WarehouseDao

```java
void deductQuantity(WarehousePO warehousePO);

/**
 * 按照商品id获取现存商品（存量>0）并按价格排序
 * @param pid
 * @return
 */
List<WarehousePO> findByPidOrderByPurchasePricePos(String pid);
```

- ProductDao

```java
int updateById(ProductPO productPO);

ProductPO findById(String id);
```

##### utils模块的供接口

- IdGenerator

```java
public static String generateSheetId(String id, String prefix)
```

- SalaryUtil

```java
/**
 * 使用表驱动根据工资计算税
 * @param salary
 * @return
 */
public static SalaryAndTax calculateTax(BigDecimal salary)
```

### 5.5 数据层分解

![image-20220708163208595](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-20220708163208595.png)

#### 5.5.1 职责

| 模块         | 职责                       |
| ------------ | -------------------------- |
| accountdao   | 账号管理                   |
| sheetdao     | 收款单、付款单、工资单操作 |
| employeedao  | 员工操作                   |
| customerdao  | 客户操作                   |
| warehousedao | 库存操作                   |
| saledao      | 销售、销售退货操作         |
| purchasedao  | 进货、进货退货操作         |
| productdao   | 商品操作                   |
| promotiondao | 促销策略操作               |

#### 5.5.2 接口规范

##### accountdao模块的供接口

- AccountDao

```java
/**
 * 创建账户
 */
Integer createAccount(AccountPO accountPO);

/**
 * 删除账户
 */
void deleteAccountById(@Param("id") Integer id);

/**
 * 修改账户
 */
void updateAccount(AccountPO accountPO);

/**
 * 查看账户（id）
 */
AccountPO searchAccountById(@Param("id") Integer id);

/**
 * 查询账户(关键字)
 */
List<AccountPO> findAccountByKeyword(@Param("keyword") String keyword);
```

##### sheetdao模块的供接口

- CollectionDao

```java
/**
 * 获取最近一条收款单
 * @return
 */
CollectionSheetPO getLatestSheet();

/**
 * 存入一条收款单记录
 * @param toSave 一条收款单记录
 * @return 影响的行数
 */
Integer saveSheet(CollectionSheetPO toSave);

/**
 * 把收款单上的具体内容存入数据库
 * @param collectionSheetContent 收款单上的转账列表
 */
Integer saveBatchSheetContent(List<CollectionSheetContentPO> collectionSheetContent);

/**
 * 查找所有收款单
 */
List<CollectionSheetPO> findAllSheet();

/**
 * 根据state返回收款单
 * @param state 收款单状态
 * @return 收款单列表
 */
List<CollectionSheetPO> findAllByState(@Param("state")CollectionSheetState state);

/**
 * 根据条件(时间、客户、业务员)查找
 */
List<CollectionSheetPO> findSheetByCondition(Condition condition);

/**
 * 查找指定id的收款单
 * @param id
 * @return
 */
CollectionSheetPO findSheetById(String id);

/**
 * 查找指定收款单下转账列表
 * @param sheetId
 */
List<CollectionSheetContentPO> findContentBySheetId(String sheetId);

/**
 * 更新指定收款单的状态
 * @param sheetId
 * @param state
 * @return
 */
Integer updateSheetState(String sheetId, CollectionSheetState state);
```

- PaymentDao

```java
/**
 * 获取最近一条付款单
 * @return
 */
PaymentSheetPO getLatestSheet();

/**
 * 存入一条付款单记录
 * @param toSave 一条付款单记录
 * @return 影响的行数
 */
Integer saveSheet(PaymentSheetPO toSave);

/**
 * 把付款单上的具体内容存入数据库
 * @param paymentSheetContent 付款单上的转账列表
 */
Integer saveBatchSheetContent(List<PaymentSheetContentPO> paymentSheetContent);

/**
 * 查找所有付款单
 */
List<PaymentSheetPO> findAllSheet();

/**
 * 根据state返回付款单
 * @param state 付款单状态
 * @return 付款单列表
 */
List<PaymentSheetPO> findAllByState(@Param("state") PaymentSheetState state);

/**
 * 根据条件(时间、客户、业务员)查找
 */
List<PaymentSheetPO> findSheetByCondition(Condition condition);

/**
 * 查找指定id的付款单
 * @param id
 * @return
 */
PaymentSheetPO findSheetById(String id);

/**
 * 查找指定付款单下转账列表
 * @param sheetId
 */
List<PaymentSheetContentPO> findContentBySheetId(String sheetId);

/**
 * 更新指定付款单的状态
 * @param sheetId
 * @param state
 * @return
 */
Integer updateSheetState(String sheetId, PaymentSheetState state);
```

- SalaryDao

```java
SalarySheetPO getLatestSheet();

Integer saveSheet(SalarySheetPO toSave);

List<SalarySheetPO> findAllSheet();

List<SalarySheetPO> findAllSheetByState(SalarySheetState state);

List<SalarySheetPO> findSheetByCondition(Condition condition);

SalarySheetPO findSheetById(String id);

Integer updateSheetState(String sheetId, SalarySheetState state);

void updateSalary(BasicSalaryPO basicSalaryPO);

BasicSalaryPO getSalary();
```

##### employeedao模块的供接口

- EmployeeDao

```java
/**
 * 新增员工
 * @param employeePO
 * @return
 */
Integer insertEmployee(EmployeePO employeePO);

/**
 * 通过姓名查找
 * @param name
 * @return
 */
EmployeePO findEmployeeByName(String name);

/**
 * 查找全部
 * @return
 */
List<EmployeePO> findAll();

/**
 * 插入打卡记录
 * @param clockInPO
 * @return
 */
Integer insertCheckIn(ClockInPO clockInPO);

/**
 * 通过姓名查找打卡记录
 * @param name
 * @return
 */
List<ClockInPO> findClockInByName(String name);

/**
 * 查找全部打卡信息
 * @return
 */
List<ClockInCountPO> findAllCountRecord();

/**
 * 获取某人最新打卡记录
 * @param name
 * @return
 */
ClockInPO getLatestByName(String name);
```

- UserDao

```java
User findByUsernameAndPassword(String username, String password);

int createUser(User user);

User findByUsername(String username);

List<User> getAllUser();

User findByUserId(Integer id);
```

##### customerdao模块的供接口

- CustomerDao

```java
int updateOne(CustomerPO customerPO);

CustomerPO findOneById(Integer supplier);

List<CustomerPO> findAllByType(CustomerType customerType);

int createCustomer(CustomerPO customerPO);

int deleteCustomer(String id);
```

##### warehousedao模块的供接口

- WarehouseDao

```java
void saveBatch(List<WarehousePO> warehousePOList);

void deductQuantity(WarehousePO warehousePO);

void addQuantity(WarehousePO warehousePO);

List<WarehousePO> findAllNotZeroByPidSortedByBatchId(String pid);

/**
 * 按照商品id获取现存商品（存量>0）并按价格排序
 * @param pid
 * @return
 */
List<WarehousePO> findByPidOrderByPurchasePricePos(String pid);

WarehousePO findOneByPidAndBatchId(String pid, Integer batchId);


/**
 * 查看所有库存（库存盘点）
 * @return 所有库存
 */
List<WarehousePO> findAll();
```

- WarehouseGiftSheetDao

```java
/**
 * 获取最近一条库存赠送单
 * @return 最近一条库存赠送单
 */
WarehouseGiftSheetPO getLatestSheet();

/**
 * 存入一条库存赠送单
 * @param toSave 一条库存赠送单
 * @return 影响行数
 */
Integer saveSheet(WarehouseGiftSheetPO toSave);

/**
 * 将库存赠送单上的内容存入数据库
 * @param warehouseGiftSheetContent 赠送单上的具体内容
 * @return 影响行数
 */
Integer saveBatchSheetContent(List<WarehouseGiftSheetContentPO> warehouseGiftSheetContent);

/**
 * 查找所有库存赠送单
 * @return 所有库存赠送单
 */
List<WarehouseGiftSheetPO> findAllSheet();

/**
 * 根据state返回库存赠送单
 * @param state 单据状态
 * @return state状态的库存赠送单
 */
List<WarehouseGiftSheetPO> findAllByState(WarehouseGiftSheetState state);

/**
 * 查找指定id的库存赠送单
 * @param id 库存赠送单id
 * @return 指定id的库存赠送单
 */
WarehouseGiftSheetPO findSheetById(String id);

/**
 * 查找指定库存赠送单下具体的商品内容
 * @param sheetId 库存赠送单id
 * @return 指定库存赠送单下具体的商品内容
 */
List<WarehouseGiftSheetContentPO> findContentBySheetId(String sheetId);

/**
 * 更新指定库存赠送单的状态
 * @param sheetId 库存赠送单id
 * @param state 库存赠送单的状态
 * @return 影响行数
 */
Integer updateSheetState(String sheetId, WarehouseGiftSheetState state);
```

- WarehouseInputSheetDao

```java
/**
 * 获取最近一条入库单
 * @return 最近一条入库单
 */
WarehouseInputSheetPO getLatest();

/**
 * 存入一条入库单记录
 * @param toSave 一条入库单记录
 * @return
 */
int save(WarehouseInputSheetPO toSave);

/**
 * 把入库单上的具体内容存入数据库
 * @param warehouseInputListPOSheetContent 入库单上的具体内容
 */
void saveBatch(List<WarehouseInputSheetContentPO> warehouseInputListPOSheetContent);

/**
 * 查看处于各个状态的入库单
 * @param state 入库单的具体状态
 */
List<WarehouseInputSheetPO> getDraftSheets(WarehouseInputSheetState state);

/**
 * 查看所有入库单
 */
List<WarehouseInputSheetPO> getAllSheets();

/**
 * 查看指定ID的入库单
 * @param id
 */
WarehouseInputSheetPO getSheet(String id);

/**
 * 更新指定ID的入库单
 * @param warehouseInputSheetPO
 */
int updateById(WarehouseInputSheetPO warehouseInputSheetPO);

/**
 * 查询指定ID的入库单内的具体商品数据
 * @param warehouseInputSheetId
 */
List<WarehouseInputSheetContentPO> getAllContentById(String warehouseInputSheetId);

/**
 * 查询指定时间段内出/入库数量/金额/商品信息/分类信息
 * @param beginTime
 * @param endTime
 */
List<WarehouseIODetailPO> getWarehouseIODetailByTime(@Param("beginTime") Date beginTime, @Param("endTime") Date endTime);

Integer getWarehouseInputProductQuantityByTime(Date beginTime,Date endTime);
```

- WarehouseOutputSheetDao

```java
/**
 * 获取最近一条出库单
 * @return 最近一条出库单
 */
WarehouseOutputSheetPO getLatest();

/**
 * 存入一条出库单记录
 * @param toSave 一条出库单记录
 * @return
 */
void save(WarehouseOutputSheetPO toSave);

/**
 * 把出库单上的具体内容存入数据库
 * @param warehouseOutputListPOSheetContent 出库单上的具体内容
 */
void saveBatch(List<WarehouseOutputSheetContentPO> warehouseOutputListPOSheetContent);

/**
 * 获取所有出库单记录
 * @return
 */
List<WarehouseOutputSheetPO> getAllSheets();

/**
 * 获取指定状态的出库单记录
 * @param state
 * @return
 */
List<WarehouseOutputSheetPO> getDraftSheets(WarehouseOutputSheetState state);

/**
 * 根据id获取单据
 * @param sheetId
 * @return
 */
WarehouseOutputSheetPO getSheet(String sheetId);

/**
 * 更新PO
 * @param warehouseOutputSheetPO
 */
void updateById(WarehouseOutputSheetPO warehouseOutputSheetPO);

/**
 * 获取出库单具体内容
 * @param sheetId
 * @return
 */
List<WarehouseOutputSheetContentPO> getAllContentById(String sheetId);


/**
 * 删除无批次的初始内容
 * @param sheetId
 */
void deleteContent(String sheetId);

Integer getWarehouseOutputProductQuantityByTime(Date beginTime,Date endTime);

/**
 * 查询指定时间段内出/入库数量/金额/商品信息/分类信息
 * @param beginTime
 * @param endTime
 */
List<WarehouseIODetailPO> getWarehouseIODetailByTime(@Param("beginTime") Date beginTime, @Param("endTime") Date endTime);

/**
 * 通过销售单id获取出库单
 * @param saleSheetId 销售单id
 * @return 出库单
 */
WarehouseOutputSheetPO getWarehouseOutSheetBySaleSheetId(@Param("saleSheetId") String saleSheetId);
```

##### saledao模块的供接口

- SaleSheetDao

```java
/**
 * 获取最近一条销售单
 * @return
 */
SaleSheetPO getLatestSheet();

/**
 * 存入一条销售单记录
 * @param toSave 一条销售单记录
 * @return 影响的行数
 */
int saveSheet(SaleSheetPO toSave);

/**
 * 把销售单上的具体内容存入数据库
 * @param saleSheetContent 入销售单上的具体内容
 */
int saveBatchSheetContent(List<SaleSheetContentPO> saleSheetContent);

/**
 * 查找所有销售单
 */
List<SaleSheetPO> findAllSheet();

/**
 * 根据state返回销售单
 * @param state 销售单状态
 * @return 销售单列表
 */
List<SaleSheetPO> findAllByState(@Param("state") SaleSheetState state);

/**
 * 查找指定id的销售单
 * @param id
 * @return
 */
SaleSheetPO findSheetById(String id);

/**
 * 根据条件(时间、客户、业务员)查找
 */
List<SaleSheetPO> findSheetByConditionPO(ConditionPO conditionPO);

/**
 * 根据条件(时间、客户、业务员)查找
 */
List<SaleSheetPO> findSheetByCondition(Condition condition);

/**
 * 查找指定销售单下具体的商品内容
 * @param sheetId
 */
List<SaleSheetContentPO> findContentBySheetId(String sheetId);

/**
 * 更新指定销售单的状态
 * @param sheetId
 * @param state
 * @return
 */
int updateSheetState(String sheetId, SaleSheetState state);

/**
 * 根据当前状态更新销售单状态
 * @param sheetId
 * @param prev
 * @param state
 * @return
 */
int updateSheetStateOnPrev(String sheetId, SaleSheetState prev, SaleSheetState state);


/**
 * 获取某个销售人员某段时间内消费总金额最大的客户(不考虑退货情况,销售单不需要审批通过,如果这样的客户有多个，仅保留一个)
 * @param salesman 销售人员的名字
 * @param beginTime 开始时间
 * @param endTime 结束时间
 * @return
 */
CustomerPurchaseAmountPO getMaxAmountCustomerOfSalesmanByTime(String salesman, Date beginTime,Date endTime);

/**
 * 根据销售员获取销售条数
 *
 * @param salesman
 * @return
 */
Integer getCountByUser(String salesman);
```

- SaleReturnsSheetDao

```java
/**
 * 获取最近一条销售退货单
 * @return 最近一条销售退货单
 */
SaleReturnsSheetPO getLatest();

/**
 * 存入一条销售退货单记录
 * @param toSave 一条销售退货单记录
 * @return 影响的行数
 */
int save(SaleReturnsSheetPO toSave);

/**
 * 把销售退货单上的具体内容存入数据库
 * @param saleReturnsSheetContent 进货退货单上的具体内容
 */
void saveBatch(List<SaleReturnsSheetContentPO> saleReturnsSheetContent);

/**
 * 返回所有销售退货单
 * @return 销售退货单列表
 */
List<SaleReturnsSheetPO> findAll();

/**
 * 根据state返回销售退货单
 * @param state 销售退货单状态
 * @return 销售退货单列表
 */
List<SaleReturnsSheetPO> findAllByState(SaleReturnsSheetState state);

/**
 * 通过saleReturnsSheetId找到对应的content条目
 * @param saleReturnsSheetId
 * @return
 */
List<SaleReturnsSheetContentPO> findContentBySaleReturnsSheetId(@Param("saleReturnsSheetId") String saleReturnsSheetId);

/**
 * 通过saleReturnsSheetId找到对应条目
 * @param saleReturnsSheetId 销售退货单id
 * @return
 */
SaleReturnsSheetPO findOneById(@Param("saleReturnsSheetId") String saleReturnsSheetId);

/**
 * 通过销售单id查找
 * @param saleSheetId
 * @return
 */
List<SaleReturnsSheetPO> findBySaleSheetId(@Param("id") String saleSheetId);

/**
 * 根据条件(时间、业务员)查找
 * @param conditionPO
 * @return
 */
List<SaleReturnsSheetPO> findSheetByConditionPO(ConditionPO conditionPO);

List<SaleReturnsSheetPO> findSheetByCondition(Condition condition);

/**
 * 根据 saleReturnsSheetId 找到条目， 并更新其状态为state
 * @param saleReturnsSheetId 销售退货单id
 * @param state 销售退货单状态
 * @return 影响的条目数
 */
int updateState(@Param("saleReturnsSheetId") String saleReturnsSheetId, @Param("state") SaleReturnsSheetState state);

/**
 * 根据 saleReturnsSheetId 和 prevState 找到条目， 并更新其状态为state
 * @param saleReturnsSheetId 销售退货单id
 * @param prevState 销售退货单之前的状态
 * @param state 销售退货单状态
 * @return 影响的条目数
 */
int updateStateV2(@Param("saleReturnsSheetId") String saleReturnsSheetId, @Param("prevState") SaleReturnsSheetState prevState, @Param("state") SaleReturnsSheetState state);

/**
 * 通过warehouseOutputSheetId和pid找到退的货的对应批次
 * @param warehouseOutputSheetId, pid
 * @return 批次号
 */
List<Integer> findBatchId(@Param("warehouseOutputSheetId") String warehouseOutputSheetId, @Param("pid") String pid);

/**
 * 通过warehouseOutputSheetId和pid找到出货单的content
 * @param warehouseOutputSheetId, pid
 * @return 出货单content
 */
List<WarehouseOutputSheetContentPO> findWarehouseOutSheetContent(@Param("warehouseOutputSheetId") String warehouseOutputSheetId, @Param("pid") String pid);
```

##### purchasedao模块的供接口

- PurchaseReturnsSheetDao

```java
/**
 * 获取最近一条进货退货单
 * @return 最近一条进货退货单
 */
PurchaseReturnsSheetPO getLatest();

/**
 * 存入一条进货退货单记录
 * @param toSave 一条进货退货单记录
 * @return 影响的行数
 */
int save(PurchaseReturnsSheetPO toSave);

/**
 * 把进货退货单上的具体内容存入数据库
 * @param PurchaseReturnsSheetContent 进货退货单上的具体内容
 */
void saveBatch(List<PurchaseReturnsSheetContentPO> PurchaseReturnsSheetContent);

/**
 * 返回所有进货退货单
 * @return 进货退货单列表
 */
List<PurchaseReturnsSheetPO> findAll();

/**
 * 根据state返回进货退货单
 * @param state 进货退货单状态
 * @return 进货退货单列表
 */
List<PurchaseReturnsSheetPO> findAllByState(PurchaseReturnsSheetState state);

/**
 * 根据条件(时间、客户、业务员)查找
 */
List<PurchaseReturnsSheetPO> findSheetByCondition(Condition condition);

/**
 * 根据 purchaseReturnsSheetId 找到条目， 并更新其状态为state
 * @param purchaseReturnsSheetId 进货退货单id
 * @param state 进货退货单状态
 * @return 影响的条目数
 */
int updateState(String purchaseReturnsSheetId, PurchaseReturnsSheetState state);

/**
 * 根据 purchaseReturnsSheetId 和 prevState 找到条目， 并更新其状态为state
 * @param purchaseReturnsSheetId 进货退货单id
 * @param prevState 进货退货单之前的状态
 * @param state 进货退货单状态
 * @return 影响的条目数
 */
int updateStateV2(String purchaseReturnsSheetId, PurchaseReturnsSheetState prevState, PurchaseReturnsSheetState state);

/**
 * 通过purchaseReturnsSheetId找到对应条目
 * @param purchaseReturnsSheetId 进货退货单id
 * @return
 */
PurchaseReturnsSheetPO findOneById(String purchaseReturnsSheetId);

/**
 * 通过purchaseReturnsSheetId找到对应的content条目
 * @param purchaseReturnsSheetId
 * @return
 */
List<PurchaseReturnsSheetContentPO> findContentByPurchaseReturnsSheetId(@Param("purchase_returns_sheet_id") String purchaseReturnsSheetId);

/**
 * 通过purchaseReturnsSheetId找到退的货的对应批次
 * @param purchaseReturnsSheetId
 * @return 批次号
 */
Integer findBatchId(String purchaseReturnsSheetId);
```

- PurchaseSheetDao

```java
/**
 * 获取最近一条进货单
 * @return 最近一条进货单
 */
PurchaseSheetPO getLatest();

/**
 * 存入一条进货单记录
 * @param toSave 一条进货单记录
 * @return 影响的行数
 */
int save(PurchaseSheetPO toSave);

/**
 * 把进货单上的具体内容存入数据库
 * @param purchaseSheetContent 进货单上的具体内容
 */
void saveBatch(List<PurchaseSheetContentPO> purchaseSheetContent);

/**
 * 返回所有进货单
 * @return 进货单列表
 */
List<PurchaseSheetPO> findAll();

/**
 * 根据state返回进货单
 * @param state 进货单状态
 * @return 进货单列表
 */
List<PurchaseSheetPO> findAllByState(PurchaseSheetState state);

/**
 * 根据条件(时间、客户、业务员)查找
 */
List<PurchaseSheetPO> findSheetByCondition(Condition condition);

int updateState(String purchaseSheetId, PurchaseSheetState state);

int updateStateV2(String purchaseSheetId, PurchaseSheetState prevState, PurchaseSheetState state);

PurchaseSheetPO findOneById(String purchaseSheetId);

List<PurchaseSheetContentPO> findContentByPurchaseSheetId(String purchaseSheetId);
```

##### productdao模块的供接口

- ProductDao

```java
int createProduct(ProductPO productPO);

int updateById(ProductPO productPO);

ProductPO findById(String id);

List<ProductPO> findAll();

int deleteById(String id);
```

- CategoryDao

```java
int createCategory(CategoryPO categoryPO);

CategoryPO findByCategoryId(Integer categoryId);

// 查询所有商品分类
List<CategoryPO> findAll();

// 修改商品分类
int updateById(CategoryPO categoryPO);

// 删除商品分类
int deleteById(Integer id);
```

##### promotiondao模块的供接口

- PromotionDao

```java
/**
 * 根据客户等级获取促销力度
 */
PromotionPO getPromotionByLevel(Integer level);

/**
 * 更改某一等级促销策略
 */
Integer updatePromotion(PromotionPO promotionPO);

/**
 * 根据等级获取赠品
 */
List<GiftPO> getGiftByLevel(Integer level);

/**
 * 插入赠品
 */
Integer insertGift(List<GiftPO> giftPOList);

/**
 * 清空某一等级的赠品
 */
Integer deleteGiftsByLevel(Integer level);

/**
 * 保存特价包
 */
Integer savePricePack(PricePackPO pricePackPO);

/**
 * 保存特价包具体信息
 */
Integer saveBatchPricePackContent(List<PricePackContentPO> pricePackContent);

/**
 * 获取全部特价包
 */
List<PricePackPO> getAllPricePack();

/**
 * 根据id获取特价包
 */
PricePackPO getPricePackById(Integer id);

/**
 * 通过特价包id获取具体内容
 */
List<PricePackContentPO> getContentByPricePackId(Integer id);

/**
 * 更改某一特价包
 */
Integer updatePricePack(PricePackPO pricePackPO);

/**
 * 删除某一特价包
 */
Integer deletePricePackById(Integer id);

/**
 * 删除某一特价包具体内容
 */
Integer deleteContentByPricePackId(Integer id);

/**
 * 保存总价促销策略
 */
Integer saveAmountPromotion(AmountPromotionPO amountPromotionPO);

/**
 * 保存总价促销策略具体赠品
 */
Integer saveBatchAmountPromotionContent(List<AmountPromotionContentPO> amountPromotionContent);

/**
 * 获取全部总价促销策略
 */
List<AmountPromotionPO> getAllAmountPromotion();

/**
 * 根据总价获取最接近的总价促销策略
 */
AmountPromotionPO getAmountPromotionByPrice(BigDecimal price);

/**
 * 通过总价促销策略id获取具体赠品
 */
List<AmountPromotionContentPO> getContentByAmountPromotionId(Integer id);

/**
 * 更改某一总价促销策略
 */
Integer updateAmountPromotion(AmountPromotionPO pricePackPO);

/**
 * 删除某一总价促销策略
 */
Integer deleteAmountPromotionById(Integer id);

/**
 * 删除某一总价促销策略具体赠品
 */
Integer deleteContentByAmountPromotionId(Integer id);
```

## 6. 信息视角

### 6.1 数据持久化对象

- AccountPO

```java
public class AccountPO {
    /**
     * 账户id
     */
    private Integer id;

    /**
     * 账户名称
     */
    private String name;

    /**
     * 金额
     */
    private BigDecimal money;
}
```

- ClockInCountPO

```java
public class ClockInCountPO {
    /**
     * 员工姓名
     */
    private String name;

    /**
     * 打卡次数
     */
    private Integer count;
}
```

- ClockInPO

```java
public class ClockInPO {
    /**
     * id
     */
    private Integer id;

    /**
     * 员工姓名
     */
    private String name;

    /**
     * 打卡时间
     */
    private Date time;
}
```

- CollectionSheetContentPO

```java
public class CollectionSheetContentPO {

    /**
     * id
     */
    private Integer id;

    /**
     * 收款单id
     */
    private String collectionSheetId;

    /**
     * 银行账户id
     */
    private Integer accountId;

    /**
     * 转账金额
     */
    private BigDecimal money;

    /**
     * 备注
     */
    private String remark;
}
```

- CollectionSheetPO

```java
public class CollectionSheetPO {

    /**
     * 收款单id, 格式为SKD-yyyyMMdd-xxxxx
     */
    private String id;

    /**
     * 客户id
     */
    private Integer cid;

    /**
     * 操作员(当前登录用户)
     */
    private String operator;

    /**
     * 总额汇总
     */
    private BigDecimal totalAmount;

    /**
     * 单据状态
     */
    private CollectionSheetState state;

    /**
     * 创建时间
     */
    private Date createTime;
}
```

- EmployeePO

```java
public class EmployeePO {
    /**
     * 员工id
     */
    private Integer id;

    /**
     * 员工姓名
     */
    private String name;

    /**
     * 性别
     */
    private String sex;

    /**
     * 出生日期
     */
    private Date birth;

    /**
     * 手机号码
     */
    private String phone;

    /**
     * 工作岗位
     */
    private Role role;

    /**
     * 基本工资
     */
    private BigDecimal salary;
}
```

- PaymentSheetContentPO

```java
public class PaymentSheetContentPO {

    /**
     * id
     */
    private Integer id;

    /**
     * 付款单id
     */
    private String paymentSheetId;

    /**
     * 银行账户id
     */
    private Integer accountId;

    /**
     * 转账金额
     */
    private BigDecimal money;

    /**
     * 备注
     */
    private String remark;
}
```

- PaymentSheetPO

```java
public class PaymentSheetPO {

    /**
     * 付款单id, 格式为FKD-yyyyMMdd-xxxxx
     */
    private String id;

    /**
     * 客户id
     */
    private Integer cid;

    /**
     * 操作员(当前登录用户)
     */
    private String operator;

    /**
     * 总额汇总
     */
    private BigDecimal totalAmount;

    /**
     * 单据状态
     */
    private PaymentSheetState state;

    /**
     * 创建时间
     */
    private Date createTime;
}
```

- PricePackContentPO

```java
public class PricePackContentPO {
    /**
     * 自增id
     */
    private Integer id;

    /**
     * 特价包id
     */
    private Integer pricePackId;

    /**
     * 商品id
     */
    private String pid;

    /**
     * 商品数量
     */
    private Integer quantity;
}
```

- PricePackPO

```java
public class PricePackPO {
    /**
     * 特价包id
     */
    private Integer id;

    /**
     * 特价包总价
     */
    private BigDecimal amount;
}
```

- ProductPO

```java
public class ProductPO {

    /**
     * 商品id
     */
    private String id;

    /**
     * 商品名
     */
    private String name;

    /**
     * 分类ID
     */
    private Integer categoryId;

    /**
     * 商品型号
     */
    private String type;

    /**
     * 商品数量
     */
    private Integer quantity;

    /**
     *  进价
     */
    private BigDecimal purchasePrice;

    /**
     *  零售价
     */
    private BigDecimal retailPrice;

    /**
     *  最近进价
     */
    private BigDecimal recentPp;

    /**
     *  最近零售价
     */
    private BigDecimal recentRp;
}
```

- AmountPromotionContentPO

```java
public class AmountPromotionContentPO {
    /**
     * 自增id
     */
    private Integer id;

    /**
     * 对应总价策略id
     */
    private Integer amountPromotionId;

    /**
     * 商品id
     */
    private String pid;

    /**
     * 商品数量
     */
    private Integer quantity;
}
```

- AmountPromotionPO

```java
public class AmountPromotionPO {
    /**
     * 自增id
     */
    private Integer id;

    /**
     * 总价下界
     */
    private BigDecimal price;

    /**
     * 代金券金额
     */
    private BigDecimal voucher;
}
```

- GiftPO

```java
public class GiftPO {
    /**
     * 客户等级
     */
    private Integer level;

    /**
     * 商品id
     */
    private String pid;

    /**
     * 商品数量
     */
    private Integer quantity;
}
```

- PromotionPO

```java
public class PromotionPO {
    /**
     * 级别（五级，一级普通用户，五级VIP客户）
     */
    private Integer level;
    /**
     * 折扣
     */
    private BigDecimal discount;
    /**
     * 代金券
     */
    private BigDecimal voucher;
}
```

- BasicSalaryPO

```java
public class BasicSalaryPO {
    /**
     *     INVENTORY_MANAGER, //库存管理人员
     *     SALE_STAFF, // 进货销售人员
     *     FINANCIAL_STAFF, // 财务人员
     *     SALE_MANAGER, //销售经理
     *     HR, // 人力资源人员
     *     GM, // 总经理
     *     ADMIN // 最高权限
     */
    private BigDecimal inventoryManagerSalary;

    private BigDecimal saleStaffSalary;

    private BigDecimal financialStaffSalary;

    private BigDecimal saleManagerSalary;

    private BigDecimal hrSalary;

    private BigDecimal gmSalary;
}
```

- SalarySheetPO

```java
public class SalarySheetPO {
    /**
     * 单据编号,格式GZD-yyyyMMdd-xxxxx
     */
    private String id;

    /**
     * 员工编号
     */
    private Integer uid;

    /**
     * 员工姓名
     */
    private String name;

    /**
     * 银行账户
     */
    private Integer accountId;

    /**
     * 应发工资
     */
    private BigDecimal rawSalary;

    /**
     * 扣除税款(个人所得税)
     */
    private BigDecimal selfTax;

    /**
     * 扣除税款(失业保险)
     */
    private BigDecimal insuranceTax;

    /**
     * 扣除税款(住房公积金)
     */
    private BigDecimal houseTax;

    /**
     * 实发工资
     */
    private BigDecimal finalSalary;

    /**
     * 单据状态
     */
    private SalarySheetState state;

    /**
     * 创建时间
     */
    private Date createTime;
}
```

- SaleSheetPO

```java
public class SaleSheetPO {
    /**
     * 销售单单据编号（格式为：XSD-yyyyMMdd-xxxxx
     */
    private String id;
    /**
     * 客户/销售商id
     */
    private Integer supplier;
    /**
     * 业务员
     */
    private String salesman;
    /**
     * 操作员
     */
    private String operator;
    /**
     * 备注
     */
    private String remark;
    /**
     * 折让前总额
     */
    private BigDecimal rawTotalAmount;
    /**
     * 折让
     */
    private BigDecimal discount;
    /**
     * 使用代金券总额
     */
    private BigDecimal voucherAmount;
    /**
     * 折让后总额
     */
    private BigDecimal finalAmount;
    /**
     * 单据状态
     */
    private SaleSheetState state;
    /**
     * 创建时间
     */
    private Date createTime;
    /**
     * 特价包id
     */
    private Integer pricePackId;
}
```

- ConditionPO

```java
public class ConditionPO {
    /**
     * 起始时间
     */
    private Date beginDate;

    /**
     * 终止时间
     */
    private Date endDate;

    /**
     * 商品ID
     */
    private String pid;

    /**
     * 客户ID
     */
    private Integer cid;

    /**
     * 业务员姓名
     */
    private String operator;
}
```

- WarehouseGiftSheetContentPO

```java
public class WarehouseGiftSheetContentPO {
    /**
     * 自增id
     */
    private Integer id;
    /**
     * 库存赠送单id
     */
    private String warehouseGiftSheetId;
    /**
     * 商品id
     */
    private String pid;
    /**
     * 数量
     */
    private Integer quantity;
}
```

- WarehouseGiftSheetPO

```java
public class WarehouseGiftSheetPO {
    /**
     * 库存赠送单单据编号（格式为：KCZSD-yyyyMMdd-xxxxx)
     */
    private String id;

    /**
     * 销售单id
     */
    private String saleSheetId;

    /**
     * 单据状态
     */
    private WarehouseGiftSheetState state;

    /**
     * 创建时间
     */
    private Date createTime;
}
```

### 6.2 数据库表

- 共34张表，如下所示

![image-20220708180826953](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-20220708180826953.png)

![image-20220708180842161](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250141-20220708180842161.png)
